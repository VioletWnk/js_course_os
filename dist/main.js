(()=>{"use strict";(function(e){let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds");function n(e){return 1===e.toString().length?`0${e}`:e}let a=setInterval((function(){let e=function(){let e=(new Date("10 february 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();e.timeRemaining<=0?(clearInterval(a),t.textContent="00",o.textContent="00",c.textContent="00"):(t.textContent=n(e.hours),o.textContent=n(e.minutes),c.textContent=n(e.seconds))}),1e3)})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu"),o=()=>{t.classList.toggle("active-menu")};e.addEventListener("click",(e=>{let c=e.target;c.closest(".menu")||c.matches(".close-btn")?o():c.matches("a")&&c.closest("menu")?(o(),(e=>{e.preventDefault();let t=e.target.getAttribute("href");const o=document.querySelector(t).getBoundingClientRect().top;window.scrollBy({top:o,behavior:"smooth"})})(e)):!c.closest("menu")&&t.classList.contains("active-menu")&&o()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((o=>{o.addEventListener("click",(()=>{e.style.display="block";let o=-30;t.style.left=`${o}%`;let c=setInterval((()=>{38===o?clearInterval(c):t.style.left=++o+"%"}),20)}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let c=e.target;c=c.closest(".service-header-tab"),c.classList.contains("service-header-tab")&&t.forEach(((e,n)=>{e===c&&(e=>{for(let c=0;c<o.length;c++)e===c?(t[c].classList.add("active"),o[c].classList.remove("d-none")):(t[c].classList.remove("active"),o[c].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");e.forEach((e=>{let o=document.createElement("li");o.classList.add("dot"),e.classList.contains("portfolio-item-active")&&o.classList.add("dot-active"),t.append(o)})),document.querySelectorAll(".portfolio-btn");const o=document.querySelectorAll(".dot"),c=document.querySelector(".portfolio-content");let n,a=0;const r=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},s=()=>{r(e,a,"portfolio-item-active"),r(o,a,"dot-active"),a++,a>=e.length&&(a=0),l(e,a,"portfolio-item-active"),l(o,a,"dot-active")},i=(e=3e3)=>{n=setInterval(s,e)};c.addEventListener("click",(t=>{t.preventDefault();let c=t.target;c.matches(".portfolio-btn, .dot")&&(r(e,a,"portfolio-item-active"),r(o,a,"dot-active"),c.matches("#arrow-right")?a++:c.matches("#arrow-left")?a--:c.matches(".dot")&&o.forEach(((e,t)=>{e===c&&(a=t)})),a>=e.length&&(a=0),a<0&&(a=e.length-1),l(e,a,"portfolio-item-active"),l(o,a,"dot-active"))})),c.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),c.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{const e=document.querySelector("#command"),t=e=>{if(e.target.matches(".command__photo")){let t=e.target.getAttribute("data-img"),o=e.target.getAttribute("src");e.target.setAttribute("src",t),e.target.setAttribute("data-img",o)}};e.addEventListener("mouseover",(e=>{t(e)})),e.addEventListener("mouseout",(e=>{t(e)}))})(),document.querySelector(".calc-block").addEventListener("input",(e=>{if(e.target.matches("input")){let t=e.target.value.match(/\d+/);e.target.value=t}})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),n=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("input",(t=>{const l=t.target;(l.matches(".calc-type")||l.matches(".calc-square")||l.matches(".calc-day")||l.matches(".calc-count"))&&(()=>{let t=0,l=1,s=1;const i=o.options[o.selectedIndex].value,u=+c.value;a.value>1&&(l+=(a.value-1)/10),n.value&&n.value<5?s*=2:n.value&&n.value<10&&(s*=1.5),i&&u&&(t=e*u*i*l*s);const d=()=>{let e=+r.textContent,o=t/200;e<t?(r.textContent=Math.ceil(e+o),setTimeout(d,1)):r.textContent=Math.ceil(t)};d()})()}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="color: #fff;",document.querySelector("body").addEventListener("input",(e=>{if(e.target.matches('[name="user_phone"]')){let t=e.target.value.match(/\+?([78])?\d{0,10}/);e.target.value=t[0]}else if(e.target.matches('[name="user_name"]')){let t=e.target.value.match(/[а-яА-Я\s]+/);e.target.value=t[0]}else if(e.target.matches('[name="user_message"]')){let t=e.target.value.match(/[а-яА-Я\s]+/);e.target.value=t[0]}})),e.forEach((e=>{e.addEventListener("submit",(c=>{c.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const n=new FormData(e);o(n).then((e=>{if(200!==e.status)throw new Error("status network is not 200");t.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((e=>{t.textContent="Что-то пошло не так...",console.error(e)}))}))}));const o=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})()})();