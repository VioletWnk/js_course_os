(()=>{"use strict";var t,e,n,o,c,a,r,i,u,l;(function(t){var e=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function c(t){return 1===t.toString().length?"0".concat(t):t}var a=setInterval((function(){var t,r,i,u=(t=(new Date("10 february 2021").getTime()-(new Date).getTime())/1e3,r=Math.floor(t%60),i=Math.floor(t/60%60),{timeRemaining:t,hours:Math.floor(t/60/60),minutes:i,seconds:r});u.timeRemaining<=0?(clearInterval(a),e.textContent="00",n.textContent="00",o.textContent="00"):(e.textContent=c(u.hours),n.textContent=c(u.minutes),o.textContent=c(u.seconds))}),1e3)})(),i=document.querySelector("body"),u=document.querySelector("menu"),l=function(){u.classList.toggle("active-menu")},i.addEventListener("click",(function(t){var e=t.target;e.closest(".menu")||e.matches(".close-btn")?l():e.matches("a")&&e.closest("menu")?(l(),function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=document.querySelector(e).getBoundingClientRect().top;window.scrollBy({top:n,behavior:"smooth"})}(t)):!e.closest("menu")&&u.classList.contains("active-menu")&&l()})),a=document.querySelector(".popup"),r=document.querySelector(".popup-content"),document.querySelectorAll(".popup-btn").forEach((function(t){t.addEventListener("click",(function(){a.style.display="block";var t=-30;r.style.left="".concat(t,"%");var e=setInterval((function(){38===t?clearInterval(e):r.style.left="".concat(++t,"%")}),20)}))})),a.addEventListener("click",(function(t){var e=t.target;e.classList.contains("popup-close")?a.style.display="none":(e=e.closest(".popup-content"))||(a.style.display="none")})),n=document.querySelector(".service-header"),o=n.querySelectorAll(".service-header-tab"),c=document.querySelectorAll(".service-tab"),n.addEventListener("click",(function(t){var e=t.target;(e=e.closest(".service-header-tab")).classList.contains("service-header-tab")&&o.forEach((function(t,n){t===e&&function(t){for(var e=0;e<c.length;e++)t===e?(o[e].classList.add("active"),c[e].classList.remove("d-none")):(o[e].classList.remove("active"),c[e].classList.add("d-none"))}(n)}))})),function(){var t=document.querySelectorAll(".portfolio-item"),e=document.querySelector(".portfolio-dots");t.forEach((function(t){var n=document.createElement("li");n.classList.add("dot"),t.classList.contains("portfolio-item-active")&&n.classList.add("dot-active"),e.append(n)})),document.querySelectorAll(".portfolio-btn");var n,o=document.querySelectorAll(".dot"),c=document.querySelector(".portfolio-content"),a=0,r=function(t,e,n){t[e].classList.remove(n)},i=function(t,e,n){t[e].classList.add(n)},u=function(){r(t,a,"portfolio-item-active"),r(o,a,"dot-active"),++a>=t.length&&(a=0),i(t,a,"portfolio-item-active"),i(o,a,"dot-active")},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;n=setInterval(u,t)};c.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(r(t,a,"portfolio-item-active"),r(o,a,"dot-active"),n.matches("#arrow-right")?a++:n.matches("#arrow-left")?a--:n.matches(".dot")&&o.forEach((function(t,e){t===n&&(a=e)})),a>=t.length&&(a=0),a<0&&(a=t.length-1),i(t,a,"portfolio-item-active"),i(o,a,"dot-active"))})),c.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(n)})),c.addEventListener("mouseout",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&l()})),l(1500)}(),t=document.querySelector("#command"),e=function(t){if(t.target.matches(".command__photo")){var e=t.target.getAttribute("data-img"),n=t.target.getAttribute("src");t.target.setAttribute("src",e),t.target.setAttribute("data-img",n)}},t.addEventListener("mouseover",(function(t){e(t)})),t.addEventListener("mouseout",(function(t){e(t)})),document.querySelector(".calc-block").addEventListener("input",(function(t){if(t.target.matches("input")){var e=t.target.value.match(/\d+/);t.target.value=e}})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),r=document.getElementById("total"),i=function(){var e=0,i=1,u=1,l=n.options[n.selectedIndex].value,s=+o.value;a.value>1&&(i+=(a.value-1)/10),c.value&&c.value<5?u*=2:c.value&&c.value<10&&(u*=1.5),l&&s&&(e=t*s*l*i*u),function t(){var n=+r.textContent,o=e/200;n<e?(r.textContent=Math.ceil(n+o),setTimeout(t,1)):r.textContent=Math.ceil(e)}()};e.addEventListener("input",(function(t){var e=t.target;(e.matches(".calc-type")||e.matches(".calc-square")||e.matches(".calc-day")||e.matches(".calc-count"))&&i()}))}(),function(){var t=document.querySelectorAll("form"),e=document.createElement("div");e.style.cssText="color: #fff;",document.querySelector("body").addEventListener("input",(function(t){if(t.target.matches('[name="user_phone"]')){var e=t.target.value.match(/\+?([78])?\d{0,10}/);t.target.value=e[0]}else if(t.target.matches('[name="user_name"]')){var n=t.target.value.match(/[а-яА-Я\s]+/);t.target.value=n[0]}else if(t.target.matches('[name="user_message"]')){var o=t.target.value.match(/[а-яА-Я\s]+/);t.target.value=o[0]}})),t.forEach((function(t){t.addEventListener("submit",(function(o){o.preventDefault(),t.appendChild(e),e.textContent="Загрузка...";var c=new FormData(t);n(c).then((function(t){if(200!==t.status)throw new Error("status network is not 200");e.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(t){e.textContent="Что-то пошло не так...",console.error(t)}))}))}));var n=function(t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}}()})();